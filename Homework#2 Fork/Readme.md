#  C Code: р╕Бр╕▓р╕гр╕кр╕гр╣Йр╕▓р╕З Child Processes р╕Фр╣Йр╕зр╕в fork()

р╣Вр╕Др╣Йр╕Фр╕Щр╕╡р╣Йр╣Ар╕Ыр╣Зр╕Щр╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕Зр╕Бр╕▓р╕гр╣Гр╕Кр╣Йр╕Яр╕▒р╕Зр╕Бр╣Мр╕Кр╕▒р╕Щ `fork()` р╣Гр╕Щр╕ар╕▓р╕йр╕▓ C р╣Ар╕Юр╕╖р╣Ир╕нр╕кр╕гр╣Йр╕▓р╕Зр╣Вр╕Юр╕гр╣Ар╕Лр╕кр╕ер╕╣р╕Б (Child Processes) р╕Ир╕│р╕Щр╕зр╕Щ 10 р╕Хр╕▒р╕зр╕Ир╕▓р╕Бр╣Вр╕Юр╕гр╣Ар╕Лр╕кр╣Бр╕бр╣И (Parent Process) р╣Бр╕ер╕░р╣Бр╕кр╕Фр╕Зр╣Гр╕лр╣Йр╣Ар╕лр╣Зр╕Щр╕Цр╕╢р╕Зр╕Бр╕▓р╕гр╕Ир╕▒р╕Фр╕Бр╕▓р╕гр╣Вр╕Юр╕гр╣Ар╕Лр╕кр╣Ар╕Ър╕╖р╣Йр╕нр╕Зр╕Хр╣Йр╕Щр╣Гр╕Щр╕гр╕░р╕Ър╕Ър╕Ыр╕Пр╕┤р╕Ър╕▒р╕Хр╕┤р╕Бр╕▓р╕гр╕Др╕ер╣Йр╕▓р╕в Unix

## ЁЯОп р╕ар╕▓р╕Юр╕гр╕зр╕бр╕Бр╕▓р╕гр╕Чр╕│р╕Зр╕▓р╕Щ

р╣Вр╕Ыр╕гр╣Бр╕Бр╕гр╕бр╕Щр╕╡р╣Йр╕Ир╕░р╕Чр╕│р╕Зр╕▓р╕Щр╣Ар╕Ыр╣Зр╕Щ 2 р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕лр╕ер╕▒р╕Б:
1.  **р╕кр╕гр╣Йр╕▓р╕Зр╣Вр╕Юр╕гр╣Ар╕Лр╕кр╕ер╕╣р╕Б 10 р╕Хр╕▒р╕з:** р╣Вр╕Юр╕гр╣Ар╕Лр╕кр╣Бр╕бр╣Ир╕Ир╕░р╣Гр╕Кр╣Й `for` loop р╣Ар╕Юр╕╖р╣Ир╕нр╣Ар╕гр╕╡р╕вр╕Б `fork()` р╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф 10 р╕Др╕гр╕▒р╣Йр╕З р╕Чр╕│р╣Гр╕лр╣Йр╣Ар╕Бр╕┤р╕Фр╣Вр╕Юр╕гр╣Ар╕Лр╕кр╕ер╕╣р╕Бр╕Вр╕╢р╣Йр╕Щр╕бр╕▓ 10 р╕Хр╕▒р╕з
2.  **р╕гр╕нр╣Вр╕Юр╕гр╣Ар╕Лр╕кр╕ер╕╣р╕Бр╕Чр╕│р╕Зр╕▓р╕Щр╕Ир╕Щр╣Ар╕кр╕гр╣Зр╕И:** р╕лр╕ер╕▒р╕Зр╕Ир╕▓р╕Бр╕кр╕гр╣Йр╕▓р╕Зр╕Др╕гр╕Ър╣Бр╕ер╣Йр╕з р╣Вр╕Юр╕гр╣Ар╕Лр╕кр╣Бр╕бр╣Ир╕Ир╕░р╣Гр╕Кр╣Й `wait()` р╣Ар╕Юр╕╖р╣Ир╕нр╕лр╕вр╕╕р╕Фр╕гр╕нр╕Ир╕Щр╕Бр╕зр╣Ир╕▓р╣Вр╕Юр╕гр╣Ар╕Лр╕кр╕ер╕╣р╕Бр╕Чр╕╕р╕Бр╕Хр╕▒р╕зр╕Ир╕░р╕Чр╕│р╕Зр╕▓р╕Щр╣Ар╕кр╕гр╣Зр╕Ир╕кр╕┤р╣Йр╕Щр╣Бр╕ер╕░р╕Ыр╕┤р╕Фр╕Хр╕▒р╕зр╕ер╕З р╕Ир╕▓р╕Бр╕Щр╕▒р╣Йр╕Щр╣Вр╕Юр╕гр╣Ар╕Лр╕кр╣Бр╕бр╣Ир╕Ир╕╢р╕Зр╕Ир╕░р╕Ыр╕┤р╕Фр╕Хр╕▒р╕зр╕ер╕Зр╣Ар╕Ыр╣Зр╕Щр╕ер╕│р╕Фр╕▒р╕Ър╕кр╕╕р╕Фр╕Чр╣Йр╕▓р╕в



## тЪЩя╕П р╕Бр╕▓р╕гр╕Чр╕│р╕Зр╕▓р╕Щр╕Чр╕╡р╕ер╕░р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щ

### 1. Header Files р╣Бр╕ер╕░р╕Бр╕▓р╕гр╕Ыр╕гр╕░р╕Бр╕▓р╕ир╕Хр╕▒р╕зр╣Бр╕Ыр╕г

```c
#include <stdlib.h> // р╕кр╕│р╕лр╕гр╕▒р╕Ъ exit()
#include <stdio.h>  // р╕кр╕│р╕лр╕гр╕▒р╕Ъ printf()
#include <unistd.h> // р╕кр╕│р╕лр╕гр╕▒р╕Ъ fork(), getpid()
#include <sys/wait.h> // р╕кр╕│р╕лр╕гр╕▒р╕Ъ wait()

int main() {
    pid_t pids[10];
```
* `#include <...>`: р╕Щр╕│р╣Ар╕Вр╣Йр╕▓р╣Др╕ер╕Ър╕гр╕▓р╕гр╕╡р╕Чр╕╡р╣Ир╕Ир╕│р╣Ар╕Ыр╣Зр╕Щр╕кр╕│р╕лр╕гр╕▒р╕Ър╕Бр╕▓р╕гр╕Чр╕│р╕Зр╕▓р╕Щ
* `pid_t pids[10];`: `pid_t` р╕Др╕╖р╕нр╕Кр╕Щр╕┤р╕Фр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕кр╕│р╕лр╕гр╕▒р╕Ър╣Ар╕Бр╣Зр╕Ъ **Process ID (PID)** р╣Ар╕гр╕▓р╕кр╕гр╣Йр╕▓р╕З Array `pids` р╣Ар╕Юр╕╖р╣Ир╕нр╣Ар╕Бр╣Зр╕Ъ PID р╕Вр╕нр╕Зр╣Вр╕Юр╕гр╣Ар╕Лр╕кр╕ер╕╣р╕Бр╕Чр╕▒р╣Йр╕З 10 р╕Хр╕▒р╕з

### 2. р╕ер╕╣р╕Ыр╕кр╕гр╣Йр╕▓р╕Зр╣Вр╕Юр╕гр╣Ар╕Лр╕кр╕ер╕╣р╕Б

```c
for (size_t i = 0; i < 10; i++) {
    if ((pids[i] = fork()) < 0) {
        printf("Fork failed\n");
        exit(1);
    } else if (pids[i] == 0) {
        // р╣Вр╕Др╣Йр╕Фр╕кр╣Ир╕зр╕Щр╕Щр╕╡р╣Йр╕Чр╕│р╕Зр╕▓р╕Щр╣Гр╕Щр╣Вр╕Юр╕гр╣Ар╕Лр╕кр╕ер╕╣р╕Б
        printf("I'm the child number %zu (pid %d)\n", i, getpid());
        exit(0);
    }
}
```

р╕ер╕╣р╕Ыр╕Щр╕╡р╣Йр╕Ир╕░р╕зр╕Щ 10 р╕гр╕нр╕Ър╣Ар╕Юр╕╖р╣Ир╕нр╕кр╕гр╣Йр╕▓р╕Зр╣Вр╕Юр╕гр╣Ар╕Лр╕кр╕ер╕╣р╕Бр╕Ьр╣Ир╕▓р╕Щ `fork()`

> **ЁЯФС р╕Бр╕▓р╕гр╕Чр╕│р╕Зр╕▓р╕Щр╕Вр╕нр╕З `fork()`**
>
> `fork()` р╕Ир╕░р╕Чр╕│р╕Бр╕▓р╕гр╣Вр╕Др╕ер╕Щр╣Вр╕Юр╕гр╣Ар╕Лр╕кр╕Ыр╕▒р╕Ир╕Ир╕╕р╕Ър╕▒р╕Щ (р╣Бр╕бр╣И) р╕нр╕нр╕Бр╕бр╕▓р╣Ар╕Ыр╣Зр╕Щр╣Вр╕Юр╕гр╣Ар╕Лр╕кр╣Гр╕лр╕бр╣И (р╕ер╕╣р╕Б) р╣Бр╕ер╕░р╕Ир╕░р╕Др╕╖р╕Щр╕Др╣Ир╕▓р╕Хр╣Ир╕▓р╕Зр╕Бр╕▒р╕Щр╣Гр╕Щр╣Бр╕Хр╣Ир╕ер╕░р╣Вр╕Юр╕гр╣Ар╕Лр╕к:
> * **р╣Гр╕Щр╣Вр╕Юр╕гр╣Ар╕Лр╕кр╕ер╕╣р╕Б:** р╕Др╕╖р╕Щр╕Др╣Ир╕▓ `0`
> * **р╣Гр╕Щр╣Вр╕Юр╕гр╣Ар╕Лр╕кр╣Бр╕бр╣И:** р╕Др╕╖р╕Щр╕Др╣Ир╕▓ **PID р╕Вр╕нр╕Зр╕ер╕╣р╕Б** р╕Чр╕╡р╣Ир╣Ар╕Юр╕┤р╣Ир╕Зр╕кр╕гр╣Йр╕▓р╕З (р╣Ар╕Ыр╣Зр╕Щр╕Др╣Ир╕▓р╕Ър╕зр╕Б)
> * **р╕Цр╣Йр╕▓р╕ер╣Йр╕бр╣Ар╕лр╕ер╕з:** р╕Др╕╖р╕Щр╕Др╣Ир╕▓ `-1`

* **`else if (pids[i] == 0)`**: р╣Ар╕Зр╕╖р╣Ир╕нр╕Щр╣Др╕Вр╕Щр╕╡р╣Йр╣Ар╕Ыр╣Зр╕Щр╕Ир╕гр╕┤р╕З **р╣Ар╕Йр╕Юр╕▓р╕░р╣Гр╕Щр╣Вр╕Юр╕гр╣Ар╕Лр╕кр╕ер╕╣р╕Бр╣Ар╕Чр╣Ир╕▓р╕Щр╕▒р╣Йр╕Щ** р╣Вр╕Юр╕гр╣Ар╕Лр╕кр╕ер╕╣р╕Бр╕Ир╕░р╕Юр╕┤р╕бр╕Юр╣Мр╕Вр╣Йр╕нр╕Др╕зр╕▓р╕бр╣Бр╕Щр╕░р╕Щр╕│р╕Хр╕▒р╕зр╕нр╕нр╕Бр╕бр╕▓ (`getpid()` р╕Др╕╖р╕нр╕Бр╕▓р╕гр╕Фр╕╢р╕З PID р╕Вр╕нр╕Зр╕Хр╕▒р╕зр╣Ар╕нр╕З) р╣Бр╕ер╣Йр╕зр╕Ир╕Ър╕Бр╕▓р╕гр╕Чр╕│р╕Зр╕▓р╕Щр╕Чр╕▒р╕Щр╕Чр╕╡р╕Фр╣Йр╕зр╕в `exit(0)` р╣Ар╕Юр╕╖р╣Ир╕нр╣Др╕бр╣Ир╣Гр╕лр╣Йр╕Чр╕│р╕Зр╕▓р╕Щр╕Хр╣Ир╕нр╣Гр╕Щр╕кр╣Ир╕зр╕Щр╕Вр╕нр╕Зр╣Бр╕бр╣И
* **р╣Гр╕Щр╣Вр╕Юр╕гр╣Ар╕Лр╕кр╣Бр╕бр╣И**: `fork()` р╕Ир╕░р╕Др╕╖р╕Щр╕Др╣Ир╕▓ PID р╕Вр╕нр╕Зр╕ер╕╣р╕Б р╕Чр╕│р╣Гр╕лр╣Йр╣Др╕бр╣Ир╣Ар╕Вр╣Йр╕▓р╣Ар╕Зр╕╖р╣Ир╕нр╕Щр╣Др╕В `if` р╕лр╕гр╕╖р╕н `else if` р╣Бр╕ер╕░р╕зр╕Щр╕ер╕╣р╕Ыр╣Ар╕Юр╕╖р╣Ир╕нр╕кр╕гр╣Йр╕▓р╕Зр╕ер╕╣р╕Бр╕Хр╕▒р╕зр╕Хр╣Ир╕нр╣Др╕Ы

### 3. р╕ер╕╣р╕Ыр╕гр╕нр╣Вр╕Юр╕гр╣Ар╕Лр╕кр╕ер╕╣р╕Б

```c
for (size_t i = 0; i < 10; i++) {
    wait(NULL);
}
```
р╕лр╕ер╕▒р╕Зр╕Ир╕▓р╕Бр╕кр╕гр╣Йр╕▓р╕Зр╕ер╕╣р╕Бр╕Др╕гр╕Ъ 10 р╕Хр╕▒р╕зр╣Бр╕ер╣Йр╕з р╣Вр╕Юр╕гр╣Ар╕Лр╕кр╣Бр╕бр╣Ир╕Ир╕░р╕бр╕▓р╕Цр╕╢р╕Зр╕ер╕╣р╕Ыр╕Щр╕╡р╣Й
* **`wait(NULL)`**: р╣Ар╕Ыр╣Зр╕Щр╕Др╕│р╕кр╕▒р╣Ир╕Зр╕Чр╕╡р╣Ир╕Чр╕│р╣Гр╕лр╣Йр╣Вр╕Юр╕гр╣Ар╕Лр╕кр╣Бр╕бр╣И **р╕лр╕вр╕╕р╕Фр╕гр╕н** р╕Ир╕Щр╕Бр╕зр╣Ир╕▓р╕Ир╕░р╕бр╕╡р╣Вр╕Юр╕гр╣Ар╕Лр╕кр╕ер╕╣р╕Бр╕Хр╕▒р╕зр╣Гр╕Фр╕Хр╕▒р╕зр╕лр╕Щр╕╢р╣Ир╕Зр╕Чр╕│р╕Зр╕▓р╕Щр╣Ар╕кр╕гр╣Зр╕И р╕Бр╕▓р╕гр╕зр╕Щр╕ер╕╣р╕Ы 10 р╕Др╕гр╕▒р╣Йр╕Зр╕Бр╣Зр╣Ар╕Юр╕╖р╣Ир╕нр╕гр╕▒р╕Ър╕Ыр╕гр╕░р╕Бр╕▒р╕Щр╕зр╣Ир╕▓р╕ер╕╣р╕Бр╕Чр╕╕р╕Бр╕Хр╕▒р╕зр╣Др╕Фр╣Йр╕Ир╕Ър╕Бр╕▓р╕гр╕Чр╕│р╕Зр╕▓р╕Щр╣Др╕Ыр╣Бр╕ер╣Йр╕зр╕Ир╕гр╕┤р╕Зр╣Ж

### 4. р╕Бр╕▓р╕гр╕Ир╕Ър╕Бр╕▓р╕гр╕Чр╕│р╕Зр╕▓р╕Щр╕Вр╕нр╕Зр╣Вр╕Юр╕гр╣Ар╕Лр╕кр╣Бр╕бр╣И

```c
printf("Parent terminated (pid %d)\n", getpid());
return 0;
```
р╕Ър╕гр╕гр╕Чр╕▒р╕Фр╕Щр╕╡р╣Йр╕Ир╕░р╕Чр╕│р╕Зр╕▓р╕Щр╣Ар╕Ыр╣Зр╕Щр╕ер╕│р╕Фр╕▒р╕Ър╕кр╕╕р╕Фр╕Чр╣Йр╕▓р╕в р╕лр╕ер╕▒р╕Зр╕Ир╕▓р╕Бр╕Чр╕╡р╣Ир╕ер╕╣р╕Бр╕Чр╕▒р╣Йр╕З 10 р╕Хр╕▒р╕зр╕Ыр╕┤р╕Фр╕Хр╕▒р╕зр╕ер╕Зр╣Бр╕ер╣Йр╕з р╣Вр╕Юр╕гр╣Ар╕Лр╕кр╣Бр╕бр╣Ир╕Ир╕░р╕Юр╕┤р╕бр╕Юр╣Мр╕Вр╣Йр╕нр╕Др╕зр╕▓р╕бр╕Вр╕нр╕Зр╕Хр╕▒р╕зр╣Ар╕нр╕Зр╣Бр╕ер╕░р╕Ир╕Ър╣Вр╕Ыр╕гр╣Бр╕Бр╕гр╕б

## ЁЯЪА р╕зр╕┤р╕Шр╕╡р╕Др╕нр╕бр╣Др╕Юр╕ер╣Мр╣Бр╕ер╕░р╕гр╕▒р╕Щр╣Вр╕Ыр╕гр╣Бр╕Бр╕гр╕б

1.  р╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╣Вр╕Др╣Йр╕Фр╣Ар╕Ыр╣Зр╕Щр╣Др╕Яр╕ер╣М `.c` (р╣Ар╕Кр╣Ир╕Щ `fork.c`)
2.  р╣Ар╕Ыр╕┤р╕Ф Terminal р╣Бр╕ер╣Йр╕зр╕Др╕нр╕бр╣Др╕Юр╕ер╣Мр╕Фр╣Йр╕зр╕в `gcc`:
    ```bash
    gcc fork.c -o fork
    ```
3.  р╕гр╕▒р╕Щр╣Вр╕Ыр╕гр╣Бр╕Бр╕гр╕б:
    ```bash
    ./fork
    ```

## ЁЯУЛ р╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣Мр╕Чр╕╡р╣Ир╕Др╕▓р╕Фр╕лр╕зр╕▒р╕З

```bash
# р╕ер╕│р╕Фр╕▒р╕Ър╕Вр╕нр╕З Child р╕нр╕▓р╕Ир╕кр╕ер╕▒р╕Ър╕Бр╕▒р╕Щр╣Др╕Фр╣Йр╣Гр╕Щр╣Бр╕Хр╣Ир╕ер╕░р╕Др╕гр╕▒р╣Йр╕Зр╕Чр╕╡р╣Ир╕гр╕▒р╕Щ
I'm the child number 1 (pid 2345)
I'm the child number 0 (pid 2344)
I'm the child number 3 (pid 2347)
I'm the child number 5 (pid 2349)
... (р╕Ир╕Щр╕Др╕гр╕Ъ 10 р╕Хр╕▒р╕з) ...
I'm the child number 9 (pid 2353)
Parent terminated (pid 2343)
```
**р╕Вр╣Йр╕нр╕кр╕▒р╕Зр╣Ар╕Бр╕Х:** р╕Вр╣Йр╕нр╕Др╕зр╕▓р╕бр╕Вр╕нр╕З `Parent` р╕Ир╕░р╕Ыр╕гр╕▓р╕Бр╕Пр╣Ар╕Ыр╣Зр╕Щр╕Ър╕гр╕гр╕Чр╕▒р╕Фр╕кр╕╕р╕Фр╕Чр╣Йр╕▓р╕вр╣Ар╕кр╕бр╕н р╣Ар╕Юр╕гр╕▓р╕░р╕бр╕▒р╕Щр╕Цр╕╣р╕Бр╕кр╕▒р╣Ир╕Зр╣Гр╕лр╣Йр╕гр╕н р╣Бр╕Хр╣Ир╕ер╕│р╕Фр╕▒р╕Ър╕Вр╕нр╕Зр╕Вр╣Йр╕нр╕Др╕зр╕▓р╕бр╕Ир╕▓р╕Б `Child` р╕Ир╕░р╣Др╕бр╣Ир╣Бр╕Щр╣Ир╕Щр╕нр╕Щ р╣Ар╕Юр╕гр╕▓р╕░р╕гр╕░р╕Ър╕Ър╕Ыр╕Пр╕┤р╕Ър╕▒р╕Хр╕┤р╕Бр╕▓р╕гр╣Ар╕Ыр╣Зр╕Щр╕Ьр╕╣р╣Йр╕Ир╕▒р╕Фр╕кр╕гр╕гр╣Ар╕зр╕ер╕▓ CPU р╣Гр╕лр╣Йр╣Бр╕Хр╣Ир╕ер╕░р╣Вр╕Юр╕гр╣Ар╕Лр╕кр╕нр╕вр╣Ир╕▓р╕Зр╕нр╕┤р╕кр╕гр╕░
