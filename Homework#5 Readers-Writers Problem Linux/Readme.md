# ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ Readers-Writers ‡πÅ‡∏ö‡∏ö‡∏ó‡∏µ‡πà 1 (First Readers-Writers Problem)

‡∏Å‡∏≤‡∏£ implement ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏Ñ‡∏•‡∏≤‡∏™‡∏™‡∏¥‡∏Å **First Readers-Writers Problem** ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ POSIX threads ‡πÅ‡∏•‡∏∞ semaphores ‡πÉ‡∏ô‡∏†‡∏≤‡∏©‡∏≤ C

## üìã ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏õ‡∏±‡∏ç‡∏´‡∏≤

‡∏õ‡∏±‡∏ç‡∏´‡∏≤ Readers-Writers ‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡∏î‡πâ‡∏≤‡∏ô synchronization ‡πÉ‡∏ô operating systems ‡∏Å‡∏≤‡∏£ implement ‡∏ô‡∏µ‡πâ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏±‡∏ö **‡πÅ‡∏ö‡∏ö‡∏ó‡∏µ‡πà 1** ‡∏ã‡∏∂‡πà‡∏á‡πÉ‡∏´‡πâ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏Å‡∏±‡∏ö readers ‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ writers ‡πÇ‡∏î‡∏¢‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô:

- **Mutual Exclusion**: Writers ‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á critical section ‡πÅ‡∏ö‡∏ö exclusive
- **Reader Concurrency**: Readers ‡∏´‡∏•‡∏≤‡∏¢‡∏ï‡∏±‡∏ß‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏Ç‡πâ‡∏≤ critical section ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô‡πÑ‡∏î‡πâ
- **No Deadlock**: ‡∏£‡∏∞‡∏ö‡∏ö‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏ß‡πà‡∏≤‡∏à‡∏∞‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏î deadlock
- **Bounded Waiting**: ‡∏ó‡∏∏‡∏Å thread ‡∏à‡∏∞‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏Ñ‡∏≤‡∏î‡∏Å‡∏≤‡∏£‡∏ì‡πå‡πÑ‡∏î‡πâ

### ‡∏Ç‡πâ‡∏≠‡∏Å‡∏≥‡∏´‡∏ô‡∏î

- **‡∏à‡∏≥‡∏ô‡∏ß‡∏ô threads ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î 1,000 ‡∏ï‡∏±‡∏ß**: 10 writers, 990 readers
- **‡∏™‡∏∏‡πà‡∏°‡πÄ‡∏•‡∏∑‡∏≠‡∏Å writers**: Writers ‡∏ñ‡∏π‡∏Å‡∏™‡∏∏‡πà‡∏°‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏≤‡∏Å thread pool
- **Readers ‡πÅ‡∏ö‡πà‡∏á‡πÄ‡∏õ‡πá‡∏ô batches**: Readers ‡πÅ‡∏ö‡πà‡∏á‡πÄ‡∏õ‡πá‡∏ô 11 batches (‡πÅ‡∏ï‡πà‡∏•‡∏∞ batch ‡∏°‡∏µ 60-120 threads)
- **‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥**: ‡πÅ‡∏ï‡πà‡∏•‡∏∞ critical section ‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤ 1 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ‡∏û‡∏≠‡∏î‡∏µ ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ spinlock busy-wait
- **‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏•‡∏≥‡∏î‡∏±‡∏ö**: `R ‚Üí W ‚Üí R ‚Üí W ‚Üí R ‚Üí W ‚Üí ... ‚Üí W ‚Üí R`

## üèóÔ∏è ‡∏™‡∏ñ‡∏≤‡∏õ‡∏±‡∏ï‡∏¢‡∏Å‡∏£‡∏£‡∏°

### ‡∏Å‡∏•‡∏¢‡∏∏‡∏ó‡∏ò‡πå‡∏Å‡∏≤‡∏£ Synchronization

‡∏Å‡∏≤‡∏£ implement ‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πâ‡∏ß‡∏¥‡∏ò‡∏µ **semaphore-based orchestration**:

```
Main Thread (Orchestrator)
    ‚îú‚îÄ ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤ critical section ‡∏ú‡πà‡∏≤‡∏ô semaphores
    ‚îú‚îÄ ‡πÄ‡∏õ‡∏¥‡∏î gate_read ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö reader batches
    ‚îú‚îÄ ‡πÄ‡∏õ‡∏¥‡∏î gate_write ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö writers ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ï‡∏±‡∏ß
    ‚îî‚îÄ ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö R-W-R-W ‡∏ï‡∏≤‡∏°‡∏•‡∏≥‡∏î‡∏±‡∏ö

Reader Threads
    ‚îú‚îÄ ‡∏£‡∏≠‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà semaphore gate_read
    ‚îú‚îÄ ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÉ‡∏ô critical section ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô (‡∏†‡∏≤‡∏¢‡πÉ‡∏ô batch)
    ‚îú‚îÄ Reader ‡∏ï‡∏±‡∏ß‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏™‡πà‡∏á signal ‡∏ß‡πà‡∏≤ batch ‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß
    ‚îî‚îÄ ‡πÑ‡∏°‡πà‡∏û‡∏¥‡∏°‡∏û‡πå output

Writer Threads
    ‚îú‚îÄ ‡∏£‡∏≠‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà semaphore gate_write
    ‚îú‚îÄ ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÉ‡∏ô critical section ‡πÅ‡∏ö‡∏ö exclusive
    ‚îú‚îÄ ‡∏û‡∏¥‡∏°‡∏û‡πå: no = <‡∏•‡∏≥‡∏î‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤ CS> x = <‡∏Ñ‡πà‡∏≤‡∏Ç‡∏≠‡∏á x>
    ‚îî‚îÄ ‡∏™‡πà‡∏á signal ‡∏ß‡πà‡∏≤‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏ó‡∏µ‡πà orchestrator
```

### ‡∏≠‡∏á‡∏Ñ‡πå‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏´‡∏•‡∏±‡∏Å

| ‡∏™‡πà‡∏ß‡∏ô‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö | ‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà |
|-----------|---------|
| `gate_read` | ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ç‡∏≠‡∏á reader batch |
| `gate_write` | ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏Ç‡∏≠‡∏á writer |
| `batch_done` | ‡∏™‡πà‡∏á‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì‡∏ß‡πà‡∏≤ reader batch ‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß |
| `writer_done` | ‡∏™‡πà‡∏á‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì‡∏ß‡πà‡∏≤ writer ‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß |
| `enter_seq` | Atomic counter ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ô‡∏±‡∏ö‡∏•‡∏≥‡∏î‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤ CS |
| `x` | ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏£‡πà‡∏ß‡∏° (writers ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡πà‡∏≤) |

## üîß ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏≤‡∏£ Implement

### 1. Spinlock (‡∏´‡πâ‡∏≤‡∏°‡πÉ‡∏ä‡πâ `sleep()`)

```c
static inline void busy_1s(void) {
    struct timespec t0, now;
    clock_gettime(CLOCK_MONOTONIC, &t0);
    for (;;) {
        clock_gettime(CLOCK_MONOTONIC, &now);
        // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏õ
        if (‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏õ >= 1.0s) break;
        // Busy-wait (spin)
    }
}
```

**‡∏ó‡∏≥‡πÑ‡∏°‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ spinlock?**
- ‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÉ‡∏´‡πâ: ‡∏´‡πâ‡∏≤‡∏°‡πÉ‡∏ä‡πâ `sleep()`
- ‡πÉ‡∏´‡πâ‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥‡∏û‡∏≠‡∏î‡∏µ 1 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
- Trade-off: ‡πÉ‡∏ä‡πâ CPU ‡∏™‡∏π‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥

### 2. ‡∏Å‡∏≤‡∏£‡∏™‡∏∏‡πà‡∏°‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Writers

‡πÉ‡∏ä‡πâ **Fisher-Yates shuffle** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏∏‡πà‡∏°‡πÄ‡∏•‡∏∑‡∏≠‡∏Å 10 threads ‡πÄ‡∏õ‡πá‡∏ô writers ‡∏à‡∏≤‡∏Å thread pool ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î 1,000 ‡∏ï‡∏±‡∏ß

```c
shuffle(threads)
for k = 0 to 9:
    is_writer[shuffled[k]] = 1
```

### 3. ‡∏Å‡∏≤‡∏£‡∏™‡∏∏‡πà‡∏°‡∏Ç‡∏ô‡∏≤‡∏î Reader Batches

‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡∏ô‡∏≤‡∏î batch 11 ‡∏Å‡∏•‡∏∏‡πà‡∏°‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á `[60, 120]` ‡∏ó‡∏µ‡πà‡∏£‡∏ß‡∏°‡∏Å‡∏±‡∏ô‡πÑ‡∏î‡πâ‡∏û‡∏≠‡∏î‡∏µ 990:

```c
‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô: [90, 90, 90, ..., 90]  // 11 batches
‡∏™‡∏∏‡πà‡∏°‡∏õ‡∏£‡∏±‡∏ö: [78, 95, 83, ..., 91]  // ‡∏ú‡∏•‡∏£‡∏ß‡∏° = 990
```

### 4. ‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏•‡∏≥‡∏î‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤ CS

```c
// Global atomic counter
atomic_int enter_seq = 0;

// ‡πÅ‡∏ï‡πà‡∏•‡∏∞ thread ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡πà‡∏≤‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤ CS
int no = atomic_fetch_add(&enter_seq, 1) + 1;
```

‡∏ß‡∏¥‡∏ò‡∏µ‡∏ô‡∏µ‡πâ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏ß‡πà‡∏≤ `no` ‡πÅ‡∏ó‡∏ô**‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡πâ‡∏≤ critical section ‡∏à‡∏£‡∏¥‡∏á** ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á thread

## üìä Timeline ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô

```
t=0.0s    : ‡∏™‡∏£‡πâ‡∏≤‡∏á 1000 threads (‡∏ó‡∏∏‡∏Å‡∏ï‡∏±‡∏ß‡∏£‡∏≠‡∏≠‡∏¢‡∏π‡πà)
t=0.0s    : ‡πÄ‡∏õ‡∏¥‡∏î‡∏õ‡∏£‡∏∞‡∏ï‡∏π‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Batch 0 (78 readers)
t=0.0-1.0s: 78 readers ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô
t=1.0s    : Reader ‡∏ï‡∏±‡∏ß‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢ signal ‚Üí Writer #1 ‡πÄ‡∏Ç‡πâ‡∏≤
t=1.0-2.0s: Writer #1 ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô ‚Üí ‡∏û‡∏¥‡∏°‡∏û‡πå "no = 79 x = 1"
t=2.0s    : ‡πÄ‡∏õ‡∏¥‡∏î‡∏õ‡∏£‡∏∞‡∏ï‡∏π‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Batch 1 (95 readers)
...
t=20.0s   : Writer #10 ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô
t=20.0-21.0s: Batch 10 (91 readers) ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
t=21.0s   : ‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏à‡∏ö
```

**‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏Ñ‡∏≤‡∏î‡∏´‡∏ß‡∏±‡∏á**: ‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 21 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ (11 reader batches + 10 writers)

## üöÄ ‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

### ‡∏Å‡∏≤‡∏£ Compile

```bash
gcc -O2 -pthread -o rw_best rw_best.c
```

**Compiler flags:**
- `-O2`: ‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£ optimize
- `-pthread`: Link POSIX threads library

### ‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ô‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°

```bash
./rw_best
```

### ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á Output

```
no = 67   x = 1
no = 189  x = 2
no = 301  x = 3
no = 423  x = 4
no = 534  x = 5
no = 658  x = 6
no = 771  x = 7
no = 889  x = 8
no = 912  x = 9
no = 986  x = 10
Finished in 21.34 seconds. Final x = 10
```

**‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ Output:**
- `no`: ‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡πâ‡∏≤ CS ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏£‡∏ß‡∏° readers + writers)
- `x`: ‡∏Ñ‡πà‡∏≤‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å write (‡∏Ñ‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô 10)
- ‡∏°‡∏µ‡πÄ‡∏â‡∏û‡∏≤‡∏∞ writers ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏û‡∏¥‡∏°‡∏û‡πå output

## üìà ‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞‡∏î‡πâ‡∏≤‡∏ô‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û

### ‡πÄ‡∏ß‡∏•‡∏≤‡∏ï‡∏≤‡∏°‡∏ó‡∏§‡∏©‡∏é‡∏µ vs ‡πÄ‡∏ß‡∏•‡∏≤‡∏à‡∏£‡∏¥‡∏á

| ‡πÄ‡∏Å‡∏ì‡∏ë‡πå | ‡∏Ñ‡πà‡∏≤ |
|--------|-------|
| ‡πÄ‡∏ß‡∏•‡∏≤‡∏ï‡πà‡∏≥‡∏™‡∏∏‡∏î‡∏ï‡∏≤‡∏°‡∏ó‡∏§‡∏©‡∏é‡∏µ | 21.0s |
| ‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á | 21.0 - 21.5s |
| Overhead | ~1-2% |

### Trade-offs ‡∏Ç‡∏≠‡∏á Spinlock

‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÄ‡∏ä‡∏¥‡∏á‡∏õ‡∏£‡∏∞‡∏à‡∏±‡∏Å‡∏©‡πå (‡∏î‡∏π [SpinLock.pdf](SpinLock.pdf)):

| ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£ | Sequential | Concurrent (1000 threads) | ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ CPU |
|--------|-----------|---------------------------|-----------|
| Sleep | 1005ms avg | 1001ms avg | 1.4% |
| Spinlock | 1000ms avg | 1046ms avg | 98.8% |
| Hybrid | 1001ms avg | 1004ms avg | 10.0% |

**‡∏™‡∏£‡∏∏‡∏õ**: ‡πÅ‡∏°‡πâ spinlock ‡∏à‡∏∞‡πÉ‡∏´‡πâ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥‡∏ï‡∏≤‡∏°‡∏ó‡∏§‡∏©‡∏é‡∏µ ‡πÅ‡∏ï‡πà‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏†‡∏≤‡∏¢‡πÉ‡πÉ‡∏ï‡πâ high concurrency ‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å CPU contention ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£‡∏Å‡πá‡∏ï‡∏≤‡∏° spinlock ‡∏¢‡∏±‡∏á‡∏Ñ‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏ó‡∏≤‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏Ç‡πâ‡∏≠‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ç‡∏≠‡∏á‡πÇ‡∏à‡∏ó‡∏¢‡πå

## üéØ ‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á

### 1. Mutual Exclusion ‚úÖ
- ‡∏°‡∏µ‡πÄ‡∏û‡∏µ‡∏¢‡∏á writer ‡∏ï‡∏±‡∏ß‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡πÉ‡∏ô CS ‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Ñ‡∏£‡∏±‡πâ‡∏á (‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÇ‡∏î‡∏¢ orchestrator)
- Readers ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏î‡πâ‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà writer ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô

### 2. Progress ‚úÖ
- ‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÇ‡∏≠‡∏Å‡∏≤‡∏™‡πÄ‡∏Å‡∏¥‡∏î deadlock (orchestrator ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏ó‡∏∏‡∏Å gates)
- FIFO semaphore queue ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏ò‡∏£‡∏£‡∏°

### 3. Bounded Waiting ‚úÖ
- ‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏≠‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î: 21 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ (‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏±‡πâ‡∏á‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°)
- ‡πÑ‡∏°‡πà‡∏°‡∏µ thread starvation

### 4. Reader Priority ‚úÖ
- Readers ‡πÉ‡∏ô batch ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô
- Writers ‡∏£‡∏≠‡πÉ‡∏´‡πâ readers ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô batch ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡πÄ‡∏™‡∏£‡πá‡∏à‡∏Å‡πà‡∏≠‡∏ô

## üî¨ ‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö

### Checklist ‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö

- [ ] ‡∏Ñ‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏ó‡πâ‡∏≤‡∏¢ `x = 10` (writers ‡∏ó‡∏∏‡∏Å‡∏ï‡∏±‡∏ß‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß)
- [ ] ‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏£‡∏ß‡∏° ‚âà 21 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ (¬±0.5s ‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡πÑ‡∏î‡πâ)
- [ ] ‡∏•‡∏≥‡∏î‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤ CS ‡∏Ç‡∏≠‡∏á writers (`no`) ‡πÑ‡∏°‡πà‡∏ã‡πâ‡∏≥‡∏Å‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏°‡∏•‡∏≥‡∏î‡∏±‡∏ö
- [ ] ‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏î race conditions (‡∏£‡∏±‡∏ô‡∏´‡∏•‡∏≤‡∏¢‡∏Ñ‡∏£‡∏±‡πâ‡∏á)
- [ ] ‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏î deadlocks (‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏à‡∏ö‡πÄ‡∏™‡∏°‡∏≠)

### ‡∏Ç‡πâ‡∏≠‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏ó‡∏µ‡πà‡∏ó‡∏£‡∏≤‡∏ö

1. **‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ CPU ‡∏™‡∏π‡∏á**: Spinlock ‡∏Å‡∏¥‡∏ô CPU cycles ‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á busy-wait
2. **‡πÑ‡∏°‡πà scalable**: ‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡∏•‡∏î‡∏•‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ threads ‡∏´‡∏•‡∏≤‡∏¢‡∏û‡∏±‡∏ô‡∏ï‡∏±‡∏ß
3. **First problem variant**: Writers ‡∏≠‡∏≤‡∏à starve ‡∏ñ‡πâ‡∏≤ readers ‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏¢‡πÜ (‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏ö‡πà‡∏á batches)

## üìö ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á

- Silberschatz, A., Galvin, P. B., & Gagne, G. (2018). *Operating System Concepts* (10th ed.). Wiley.
- POSIX Threads Programming: https://computing.llnl.gov/tutorials/pthreads/
- Semaphore Documentation: `man sem_overview`

## üìÑ ‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï

‡∏Å‡∏≤‡∏£ implement ‡∏ô‡∏µ‡πâ‡∏à‡∏±‡∏î‡∏ó‡∏≥‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤ ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡πÅ‡∏•‡∏∞‡∏î‡∏±‡∏î‡πÅ‡∏õ‡∏•‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏≠‡∏¥‡∏™‡∏£‡∏∞

## üë§ ‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏ó‡∏≥

‡∏à‡∏±‡∏î‡∏ó‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏Ç‡∏≠‡∏á‡∏ß‡∏¥‡∏ä‡∏≤ Operating Systems - ‡∏Å‡∏≤‡∏£‡∏ö‡πâ‡∏≤‡∏ô‡∏õ‡∏±‡∏ç‡∏´‡∏≤ Readers-Writers

---

**‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏**: ‡∏Å‡∏≤‡∏£ implement ‡∏ô‡∏µ‡πâ‡πÉ‡∏´‡πâ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏Å‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡∏Å‡∏≤‡∏£ optimize ‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏∞‡∏ö‡∏ö production ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡∏û‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡∏≤‡πÉ‡∏ä‡πâ read-write locks (`pthread_rwlock_t`) ‡∏´‡∏£‡∏∑‡∏≠ lock-free algorithms
